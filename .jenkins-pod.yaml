kind: Pod
metadata:
  name: jenkins-agent
spec:
  containers:
  - name: jnlp
    workingDir: /home/jenkins
  - name: kaniko
    workingDir: /home/jenkins
    image: gcr.io/kaniko-project/executor:debug
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - name: docker-config
        mountPath: /kaniko/.docker
        readOnly: true
    command:
      - /busybox/cat
    tty: true
  - name: kaniko2
    workingDir: /home/jenkins
    image: gcr.io/kaniko-project/executor:debug
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - name: docker-config
        mountPath: /kaniko/.docker
        readOnly: true
    command:
      - sleep
      - 3600
  volumes:
    - name: docker-config
      secret:
        secretName: mikej091-docker
  restartPolicy: Never
